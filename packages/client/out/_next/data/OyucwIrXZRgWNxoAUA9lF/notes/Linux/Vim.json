{"pageProps":{"metaTitle":"Vim","article":{"title":"Vim","content":"# VIM\r\n\r\nVi 编辑器是所有 Unix 及 Linux 系统下标准的编辑器，在 Unix 及 Linux 系统的任何版本，Vi 编辑器是完全相同的，Vi 也是 Linux 中最基本的文本编辑器。\r\n\r\nvim 编辑器是在 vi 的基础上改进的版本，比 vi 功能更强大，支持语法颜色，是 vi 的升级版。\r\n\r\n# 模式\r\n\r\nVim 中存在三种模式：**命令模式、编辑模式（输入模式）、末行模式（尾行模式）**。\r\n\r\n- 命令模式：在该模式下不能对文件直接编辑，可以通过快捷键进行一些操作（复制行，移动光标等），打开文件之后默认进入的模式\r\n- 编辑模式：在该模式下可以对文件的内容进行编辑\r\n- 末行模式：可以在末行输入命令来对文件进行操作（搜索、替换、保存、退出、撤销、高亮等等）\r\n\r\n模式之间的切换：\r\n\r\n- 命令模式：打开文件默认该模式，其他模式通过 `esc` 返回该模式\r\n- 末行模式：在命令模式通过 `:` 进入\r\n- 编辑模式：在命令模式通过 `i`、`a` 等进入\r\n\r\n模式间的切换必须通过**命令模式**间接切换。\r\n\r\n# 打开文件\r\n\r\n1. `vim 路径`：打开指定文件\r\n2. `vim +数字 路径`：打开指定文件，并将光标移动到指定的行\r\n3. `vim +/关键词 路径`：打开指定的文件，并且高亮显示关键词\r\n4. `vim 路径1 路径2 路径3`：同时打开多个文件\r\n\r\n# 命令模式\r\n\r\n> 该模式是打开文件直接进入的模式\r\n\r\n## 光标移动\r\n\r\n1. 光标移动到**行首**：`shift + 6` === `^`\r\n2. 光标移动到**行末**：`shift + 4` === `$`\r\n3. 光标移动到**首行**：`gg`\r\n4. 光标移动到**末行**：`G`\r\n5. 翻屏操作\r\n\t- 向上翻屏：`ctrl + b`\r\n\t- 向下翻屏：`ctrl + f`\r\n6. 移动到指定的行：`数字G `\r\n7. 向上/向下移动n行：`n↑` / `n↓`\r\n8. 向左/向右移动n字符：`n←` / `n→`\r\n9. **末行模式**下移动到指定的行：`:n`\r\n\r\n## 复制操作\r\n\r\n1. 复制光标所在行：`yy`\r\n2. 以光标所在行开始，向下复制指定的行数：`数字yy`\r\n3. 可视化复制：通过 `ctrl v` / `V` / `v` 进行可视化选中，`y` 进行复制\r\n\r\n粘贴使用 `p` 键，如果复制的是整行，粘贴都是粘贴到选中位置的下一行。\r\n\r\n## 剪切/删除\r\n\r\n1. 剪切/删除光标所在行：`dd`\r\n2. 以当前行开始，向下删除/剪切指定的行：`数字dd`\r\n3. 剪切/删除光标所在的当前行之后的内容，但是删除之后下一行不上移：`D`\r\n4. 可视化删除/剪切：通过 `ctrl v` / `V` / `v` 进行可视化选中，按下 `D` 表示删除**选中行**，`d` 表示删**选中块**\r\n\r\n## 撤销/恢复\r\n\r\n- 撤销：`:u`，属于末行模式\r\n- 恢复：`ctrl + r`\r\n\r\n# 末行模式\r\n\r\n进入方式：在命令模式通过 `:` 进入，或者通过 `/` 查找进入\r\n\r\n## 退出模式\r\n\r\n- `esc`\r\n- 两次 `esc`\r\n- 删除末行全部字符\r\n\r\n## 保存和退出\r\n\r\n1. 保存操作：`:w`\r\n2. 另存为：`:w 路径`\r\n3. 退出：`:q`\r\n4. 保存并退出：`wq`，`:x`，后一个如果没有修改就是 `:q`，文件修改了就是 `:wq`\r\n5. 强制操作：`q!` 表示强制退出\r\n6. 调用外部命令：`!命令`\r\n\r\n## 查找\r\n\r\n- 查找：`/关键词`\r\n\t- 在搜索结果中切换上/下一个结果：N/n\r\n\t- 取消高亮，则需要输入：`:nohl`\r\n- 查找并替换内容\r\n\t- `:s/搜索的关键词/新的内容`：替换光标所在行的第一处符合条件的内容\r\n\t- `:s/搜索的关键词/新的内容/g`：替换光标所在行的全部符合条件的内容\r\n\t- `:%s/搜索的关键词/新的内容`：替换整个文档中每行第一个符合条件的内容\r\n\t- `:%s/搜索的关键词/新的内容/g`:替换整个文档的符合条件的内容\r\n\r\n## 其他\r\n\r\n- 显示行号：`:set nu`\r\n- 取消显示行号：`set nonu`\r\n\r\n- 查看已经打开的文件：`:files`\r\n- 切换文件：\r\n\t- `:open 文件名`：切换到已经打开的其他文件\r\n\t- `:bn`：切换到下一个文件\r\n\t- `:bp`：切换到上一个文件\r\n- 控制代码着色：\r\n\t- `:syntax on`\r\n\t- `:syntax off`\r\n- 分屏操作：\r\n\t- 垂直分屏：`:vs [file]`\r\n\t- 水平分屏：`:sv [file]`\r\n\t- 移动当前屏幕：`ctrl ww`\r\n\t- 关闭当前屏幕：`:hide`、`ctrl w c`\r\n\t- 将当前屏移动到最左 / 右端：`ctrl w H`、`ctrl w L`\r\n\t- 将当前屏移动到最上 / 下端：`ctrl w K`、`ctrl w J`\r\n\r\n# 编辑模式\r\n\r\n## 进入方式\r\n\r\n- `i`：在光标字符前插入\r\n- `a`：在光标字符后插入\r\n- `o`：在光标所在行的另起新一行插入\r\n- `I`：在光标所在行的行首开始插入，如果行首有空格则在空格之后插入\r\n- `A`：在光标所在行的行尾插入\r\n- `O`：在光标所在行的上面另起一行插入\r\n- `S`：删除光标坐在行并开始插入\r\n\r\n## 计算器\r\n\r\n当在编辑文件的时候突然需要使用计算器去计算一些公式，则此时需要用计算器，vim自身集成了一个简易的计算器。\r\n\r\n在编辑模式：\r\n\r\n1. 按下 `ctrl + R`\r\n2. 输入 `=` \r\n3. 输入需要计算的内容，按下回车\r\n4. 结果会被输入到光标所在位置\r\n\r\n# 配置文件\r\n\r\nVim配置有三种情况：\r\n\r\n- 在文件打开的时候在末行模式下输入的配置（临时的）\r\n- 个人配置文件（`~/.vimrc`，如果没有可以自行新建）\r\n- 全局配置文件（vim自带，`/etc/vimrc`）\r\n\r\n# 异常退出\r\n\r\n在编辑文件之后并没有正常的去保存退出，而是遇到突然关闭终端或者断电的情况，则发生了异常退出。\r\n\r\n解决办法：\r\n\r\n- `:recover` 进行恢复\r\n- `rm -f .passwd.swp` 删除交换文件\r\n\r\n\r\n\r\n","meta":{"size":5598,"birthTime":1663496641409.6914,"updateTime":1663496641409.9731}}},"__N_SSG":true}