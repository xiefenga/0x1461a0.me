<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>移动端适配 | 0X1461A0</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/5db4aa1edde4971b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5db4aa1edde4971b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/38c642bc88044b6e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/38c642bc88044b6e.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2c644d3580cecc35.js" defer=""></script><script src="/_next/static/chunks/framework-325eacbb81921a43.js" defer=""></script><script src="/_next/static/chunks/main-c87967b003e3efc2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-111c29f79e705983.js" defer=""></script><script src="/_next/static/chunks/542-e750f8bef0aa06d2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B%5B...param%5D%5D-4c9f87d1f418ba6e.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_buildManifest.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen"><header class="pb-10 pt-12 text-center shrink-0"><a class="uppercase tracking-widest text-gray-600" href="/">0x1461a0</a></header><main class="flex-auto mb-12"><div class="TOC_table-of-content__KyR_J"><ul><li><a href="#视口设置" data-target-id="h2-视口设置-0">视口设置</a></li><li><a href="#viewport缩放" data-target-id="h2-viewport缩放-1">viewport缩放</a></li><li><a href="#DPR缩放" data-target-id="h2-DPR缩放-2">DPR缩放</a></li></ul></div><div class="article_article-container__yUBmR"><div class="mb-8"><h1 data-title="true" class="mb-0">移动端适配</h1><p class="opacity-50 !-mt-2"><span>Post: <!-- -->2022.09.18</span><span class="font-bold">·</span><span>Update: <!-- -->2022.09.18</span></p></div><h2>视口设置</h2>
<p>通过 <code>meta</code> 元素可以设置视口的大小和缩放，viewport 有以下属性可以进行设置：</p>
<table><thead><tr><th style="text-align:center">属性</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>width</code></td><td style="text-align:left">设置布局视口的宽度，<code>device-width</code> 为设备屏幕宽度的逻辑像素</td></tr><tr><td style="text-align:center"><code>height</code></td><td style="text-align:left">设置布局视口的高度，<code>device-height</code> 为设备屏幕高度的逻辑像素</td></tr><tr><td style="text-align:center"><code>initial-scale</code></td><td style="text-align:left">设置页面的初始缩放值，为一个数字，可以带小数</td></tr><tr><td style="text-align:center"><code>user-scalable</code></td><td style="text-align:left">是否允许用户进行缩放，值为 <code>no</code> 或 <code>yes</code></td></tr><tr><td style="text-align:center"><code>minimum-scale</code></td><td style="text-align:left">允许用户的最小缩放值，为一个数字，可以带小数</td></tr><tr><td style="text-align:center"><code>maximum-scale</code></td><td style="text-align:left">允许用户的最大缩放值，为一个数字，可以带小数</td></tr></tbody></table>
<h2>viewport缩放</h2>
<p>viewport缩放适配的目的是让 <code>1px</code> 在所有的设备上一致，可以直接通过 <code>px</code> 来设置样式。</p>
<ol>
<li>首先让 viewport 的 <code>width=device-width</code></li>
<li>通过 js 获取此时 <code>device-width</code> 对应的 CSS 像素</li>
<li>再根据公式 缩放比 = device-width / viewport，设置缩放比来改变 viewport 的宽度</li>
<li>一般将 viewport 的宽度设为 375，iPhone6 的宽度</li>
</ol>
<pre><code class="language-javascript">(function(){
  //获取 viewport 宽度（此时 viewport 没有缩放）
  const curWidth = document.documentElement.clientWidth
  const targetWidth = 375
  const scale = curWidth / targetWidth
  document.getElementById(&#x27;meta[name=&quot;viewport&quot;]&#x27;)
    .content=`initial-scale=${scale},user-scalable=no,minimum-scale=${scale},maximum-scale=${scale}`
})();
</code></pre>
<h2>DPR缩放</h2>
<p>DPR缩放适配的目的是让一个CSS像素对应应一个设备像素。</p>
<ol>
<li>获取设备的 DPR</li>
<li>将 DPR 设为缩放比</li>
</ol>
<pre><code class="language-javascript">(function(){
  const scale = 1 / window.devicePixelRatio
  document.querySelector(&#x27;meta[name=&quot;viewport&quot;]&#x27;)
    .content=`initial-scale=${scale},user-scalable=no,minimum-scale=${scale},maximum-scale=${scale}`
})();
</code></pre><div><a href="/notes/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D">cd ..</a></div></div></main><footer class="pb-2 pt-12 text-center shrink-0"><div class="capitalize">copyright <span class="text-2xl align-middle">©</span> <!-- -->2022<!-- --> xie feng</div><div class="text-sm">Powered by NextJS</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaTitle":"移动端适配","article":{"title":"移动端适配","content":"## 视口设置\r\n\r\n通过 `meta` 元素可以设置视口的大小和缩放，viewport 有以下属性可以进行设置：\r\n\r\n|      属性       | 描述                                                         |\r\n| :-------------: | :----------------------------------------------------------- |\r\n|     `width`     | 设置布局视口的宽度，`device-width` 为设备屏幕宽度的逻辑像素  |\r\n|    `height`     | 设置布局视口的高度，`device-height` 为设备屏幕高度的逻辑像素 |\r\n| `initial-scale` | 设置页面的初始缩放值，为一个数字，可以带小数                 |\r\n| `user-scalable` | 是否允许用户进行缩放，值为 `no` 或 `yes`                     |\r\n| `minimum-scale` | 允许用户的最小缩放值，为一个数字，可以带小数                 |\r\n| `maximum-scale` | 允许用户的最大缩放值，为一个数字，可以带小数                 |\r\n\r\n## viewport缩放\r\n\r\nviewport缩放适配的目的是让 `1px` 在所有的设备上一致，可以直接通过 `px` 来设置样式。\r\n\r\n1. 首先让 viewport 的 `width=device-width`\r\n2. 通过 js 获取此时 `device-width` 对应的 CSS 像素\r\n3. 再根据公式 缩放比 = device-width / viewport，设置缩放比来改变 viewport 的宽度\r\n4. 一般将 viewport 的宽度设为 375，iPhone6 的宽度\r\n\r\n```javascript\r\n(function(){\r\n  //获取 viewport 宽度（此时 viewport 没有缩放）\r\n  const curWidth = document.documentElement.clientWidth\r\n  const targetWidth = 375\r\n  const scale = curWidth / targetWidth\r\n  document.getElementById('meta[name=\"viewport\"]')\r\n    .content=`initial-scale=${scale},user-scalable=no,minimum-scale=${scale},maximum-scale=${scale}`\r\n})();\r\n```\r\n\r\n## DPR缩放\r\n\r\nDPR缩放适配的目的是让一个CSS像素对应应一个设备像素。\r\n\r\n1. 获取设备的 DPR\r\n2. 将 DPR 设为缩放比\r\n\r\n```javascript\r\n(function(){\r\n  const scale = 1 / window.devicePixelRatio\r\n  document.querySelector('meta[name=\"viewport\"]')\r\n    .content=`initial-scale=${scale},user-scalable=no,minimum-scale=${scale},maximum-scale=${scale}`\r\n})();\r\n```\r\n\r\n","meta":{"size":2119,"birthTime":1663496641435.7651,"updateTime":1663496641436.117}}},"__N_SSG":true},"page":"/notes/[[...param]]","query":{"param":["移动端适配","移动端适配"]},"buildId":"OyucwIrXZRgWNxoAUA9lF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>