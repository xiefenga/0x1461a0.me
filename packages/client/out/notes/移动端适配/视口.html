<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>视口 | 0X1461A0</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/5db4aa1edde4971b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5db4aa1edde4971b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/38c642bc88044b6e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/38c642bc88044b6e.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2c644d3580cecc35.js" defer=""></script><script src="/_next/static/chunks/framework-325eacbb81921a43.js" defer=""></script><script src="/_next/static/chunks/main-c87967b003e3efc2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-111c29f79e705983.js" defer=""></script><script src="/_next/static/chunks/542-e750f8bef0aa06d2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B%5B...param%5D%5D-4c9f87d1f418ba6e.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_buildManifest.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen"><header class="pb-10 pt-12 text-center shrink-0"><a class="uppercase tracking-widest text-gray-600" href="/">0x1461a0</a></header><main class="flex-auto mb-12"><div class="TOC_table-of-content__KyR_J"><ul><li><a href="#视口" data-target-id="h2-视口-0">视口</a></li><li><a href="#布局视口" data-target-id="h2-布局视口-1">布局视口</a></li><li><a href="#视觉视口" data-target-id="h2-视觉视口-2">视觉视口</a></li><li><a href="#理想视口" data-target-id="h2-理想视口-3">理想视口</a></li><li><a href="#调节视口" data-target-id="h2-调节视口-4">调节视口</a></li></ul></div><div class="article_article-container__yUBmR"><div class="mb-8"><h1 data-title="true" class="mb-0">视口</h1><p class="opacity-50 !-mt-2"><span>Post: <!-- -->2022.09.18</span><span class="font-bold">·</span><span>Update: <!-- -->2022.09.18</span></p></div><h2>视口</h2>
<p>由于一开始并不存在专门的移动端网页，为了让给 PC 端设计的网页在移动端完整的显示</p>
<p>Apple 在 iOS Safari 中定义了一个 viewport meta 标签，用来创建一个虚拟的布局视口，而这个视口的分辨率接近于 PC 显示器，Apple 将其定义为 980px</p>
<blockquote>
<p><a href="https://www.quirksmode.org/"><em>ppk</em></a> 大神对于移动设备上的 <em>viewport</em> 有着非常多的研究（<a href="https://www.quirksmode.org/mobile/viewports.html">第一篇</a>，<a href="https://www.quirksmode.org/mobile/viewports2.html">第二篇</a>，<a href="https://www.quirksmode.org/mobile/metaviewport/">第三篇</a>），<em>ppk</em> 认为，移动设备上有三个 <em>viewport</em></p>
</blockquote>
<ul>
<li>布局视口（layout viewport）</li>
<li>视觉视口（visual viewport）</li>
<li>理想视口（ideal viewport）</li>
</ul>
<h2>布局视口</h2>
<p>布局视口用于解决 PC 端页面在手机上显示的问题，布局视口是网页布局的基准窗口</p>
<blockquote>
<p>在 PC 上，布局视口就等于当前浏览器的窗口大小；</p>
<p>在移动端，布局视口被赋予一个默认值，这个值通常比该设备的逻辑分辨率大很多，这保证 PC的网页可以在手机浏览器上呈现，但这样网页元素就会显得非常小，用户可以手动对网页进行放大查看。</p>
</blockquote>
<p>iOS, Android 基本都将这个视口分辨率设置为 980p</p>
<p>通过 <code>document.documentElement.clientWidth</code> 可以获取 layout viewport 的宽度</p>
<p>布局视口使得视口与移动端屏幕宽度完全独立开，CSS 布局将会根据它来进行计算</p>
<h2>视觉视口</h2>
<p>视觉视口是屏幕的可视部分，用户可以通过缩放操作视觉视口，同时不会影响布局视口</p>
<p>通过 <code>window.innerWidth/innerHeight</code> 可以获取视觉视口大小</p>
<p>当动态键盘在手机上弹出的时候，或者之前隐藏的地址栏变得可见的时候，visual viewport 缩小了， layout viewport 保持不变</p>
<p>视觉视口和缩放比例的关系为：</p>
<pre><code>当前缩放值 = 理想视口宽度  / 视觉视口宽度
</code></pre>
<h2>理想视口</h2>
<p>理想视口即网站页面在移动端展示的理想大小</p>
<p>浏览器调试移动端时页面上给定的像素大小就是理想视口大小，也就是屏幕的<strong>逻辑分辨率</strong></p>
<p>理想视口的大小即： 1 CSS 像素 = 1 DP</p>
<h2>调节视口</h2>
<p>通过设置 <code>content=device-width</code> 可以使得布局视口与理想视口的宽度一致</p>
<p>通过设置 <code>initial-sacle=1</code> 让布局视口宽度进行缩放，同样可以使得布局视口与理想视口的宽度一致</p>
<p>通过 <code>&lt;meta name=&quot;viewport&quot; /&gt;</code> 可以设置 layout viewport 的大小</p>
<table><thead><tr><th style="text-align:center">属性</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center"><code>width</code></td><td style="text-align:left">设置布局视口的宽度，<code>device-width</code> 为设备屏幕宽度的逻辑像素</td></tr><tr><td style="text-align:center"><code>height</code></td><td style="text-align:left">设置布局视口的高度，<code>device-height</code> 为设备屏幕高度的逻辑像素</td></tr><tr><td style="text-align:center"><code>initial-scale</code></td><td style="text-align:left">设置页面的初始缩放值，为一个数字，可以带小数</td></tr><tr><td style="text-align:center"><code>user-scalable</code></td><td style="text-align:left">是否允许用户进行缩放，值为 <code>no</code> 或 <code>yes</code></td></tr><tr><td style="text-align:center"><code>minimum-scale</code></td><td style="text-align:left">允许用户的最小缩放值，为一个数字，可以带小数</td></tr><tr><td style="text-align:center"><code>maximum-scale</code></td><td style="text-align:left">允许用户的最大缩放值，为一个数字，可以带小数</td></tr></tbody></table>
<ul>
<li><code>width</code> 设置的是 layout viewport 的宽度</li>
<li><code>initial-scale</code> 设置页面的初始缩放值<!-- -->
<ul>
<li>缩放也是设置  layout viewport 的宽度</li>
<li>缩放是相对于 ideal viewport 来进行缩放（通过 ideal viewport 计算出宽度）</li>
</ul>
</li>
</ul>
<p>所以当仅设置 <code>initial-scale=1</code> 时也可以达成 <code>width=devie-width</code> 的效果</p>
<pre><code class="language-javascript">layoutviewport = Math.max(width, idealviewport / initial-scale)

visualviewport = idealviewport / initial-scale
</code></pre><div><a href="/notes/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D">cd ..</a></div></div></main><footer class="pb-2 pt-12 text-center shrink-0"><div class="capitalize">copyright <span class="text-2xl align-middle">©</span> <!-- -->2022<!-- --> xie feng</div><div class="text-sm">Powered by NextJS</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaTitle":"视口","article":{"title":"视口","content":"## 视口\n\n由于一开始并不存在专门的移动端网页，为了让给 PC 端设计的网页在移动端完整的显示\n\nApple 在 iOS Safari 中定义了一个 viewport meta 标签，用来创建一个虚拟的布局视口，而这个视口的分辨率接近于 PC 显示器，Apple 将其定义为 980px\n\n\u003e [*ppk*](https://www.quirksmode.org/) 大神对于移动设备上的 *viewport* 有着非常多的研究（[第一篇](https://www.quirksmode.org/mobile/viewports.html)，[第二篇](https://www.quirksmode.org/mobile/viewports2.html)，[第三篇](https://www.quirksmode.org/mobile/metaviewport/)），*ppk* 认为，移动设备上有三个 *viewport*\n\n- 布局视口（layout viewport）\n- 视觉视口（visual viewport）\n- 理想视口（ideal viewport）\n\n## 布局视口\n\n布局视口用于解决 PC 端页面在手机上显示的问题，布局视口是网页布局的基准窗口\n\n\u003e 在 PC 上，布局视口就等于当前浏览器的窗口大小；\n\u003e\n\u003e 在移动端，布局视口被赋予一个默认值，这个值通常比该设备的逻辑分辨率大很多，这保证 PC的网页可以在手机浏览器上呈现，但这样网页元素就会显得非常小，用户可以手动对网页进行放大查看。\n\niOS, Android 基本都将这个视口分辨率设置为 980p\n\n通过 `document.documentElement.clientWidth` 可以获取 layout viewport 的宽度\n\n布局视口使得视口与移动端屏幕宽度完全独立开，CSS 布局将会根据它来进行计算\n\n## 视觉视口\n\n视觉视口是屏幕的可视部分，用户可以通过缩放操作视觉视口，同时不会影响布局视口\n\n通过 `window.innerWidth/innerHeight` 可以获取视觉视口大小\n\n当动态键盘在手机上弹出的时候，或者之前隐藏的地址栏变得可见的时候，visual viewport 缩小了， layout viewport 保持不变\n\n视觉视口和缩放比例的关系为：\n\n```\n当前缩放值 = 理想视口宽度  / 视觉视口宽度\n```\n\n## 理想视口\n\n理想视口即网站页面在移动端展示的理想大小\n\n浏览器调试移动端时页面上给定的像素大小就是理想视口大小，也就是屏幕的**逻辑分辨率**\n\n理想视口的大小即： 1 CSS 像素 = 1 DP\n\n## 调节视口\n\n通过设置 `content=device-width` 可以使得布局视口与理想视口的宽度一致\n\n通过设置 `initial-sacle=1` 让布局视口宽度进行缩放，同样可以使得布局视口与理想视口的宽度一致\n\n\n\n通过 `\u003cmeta name=\"viewport\" /\u003e` 可以设置 layout viewport 的大小\n\n|      属性       | 描述                                                         |\n| :-------------: | :----------------------------------------------------------- |\n|     `width`     | 设置布局视口的宽度，`device-width` 为设备屏幕宽度的逻辑像素  |\n|    `height`     | 设置布局视口的高度，`device-height` 为设备屏幕高度的逻辑像素 |\n| `initial-scale` | 设置页面的初始缩放值，为一个数字，可以带小数                 |\n| `user-scalable` | 是否允许用户进行缩放，值为 `no` 或 `yes`                     |\n| `minimum-scale` | 允许用户的最小缩放值，为一个数字，可以带小数                 |\n| `maximum-scale` | 允许用户的最大缩放值，为一个数字，可以带小数                 |\n\n- `width` 设置的是 layout viewport 的宽度\n- `initial-scale` 设置页面的初始缩放值\n  - 缩放也是设置  layout viewport 的宽度\n  - 缩放是相对于 ideal viewport 来进行缩放（通过 ideal viewport 计算出宽度）\n\n所以当仅设置 `initial-scale=1` 时也可以达成 `width=devie-width` 的效果\n\n```javascript \nlayoutviewport = Math.max(width, idealviewport / initial-scale)\n\nvisualviewport = idealviewport / initial-scale\n```\n\n","meta":{"size":3795,"birthTime":1663496641436.1855,"updateTime":1663496641436.464}}},"__N_SSG":true},"page":"/notes/[[...param]]","query":{"param":["移动端适配","视口"]},"buildId":"OyucwIrXZRgWNxoAUA9lF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>