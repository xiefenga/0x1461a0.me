<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>常见函数 | 0X1461A0</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/5db4aa1edde4971b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5db4aa1edde4971b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/38c642bc88044b6e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/38c642bc88044b6e.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2c644d3580cecc35.js" defer=""></script><script src="/_next/static/chunks/framework-325eacbb81921a43.js" defer=""></script><script src="/_next/static/chunks/main-c87967b003e3efc2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-111c29f79e705983.js" defer=""></script><script src="/_next/static/chunks/542-e750f8bef0aa06d2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B%5B...param%5D%5D-4c9f87d1f418ba6e.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_buildManifest.js" defer=""></script><script src="/_next/static/OyucwIrXZRgWNxoAUA9lF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen"><header class="pb-10 pt-12 text-center shrink-0"><a class="uppercase tracking-widest text-gray-600" href="/">0x1461a0</a></header><main class="flex-auto mb-12"><div class="TOC_table-of-content__KyR_J"><ul><li><a href="#单行函数" data-target-id="h1-单行函数-0">单行函数</a><ul><li><a href="#字符函数" data-target-id="h2-字符函数-0">字符函数</a></li><li><a href="#数学函数" data-target-id="h2-数学函数-1">数学函数</a></li><li><a href="#日期函数" data-target-id="h2-日期函数-2">日期函数</a></li><li><a href="#NULL相关" data-target-id="h2-NULL相关-3">NULL相关</a></li><li><a href="#其他函数" data-target-id="h2-其他函数-4">其他函数</a></li></ul></li><li><a href="#分组函数" data-target-id="h1-分组函数-1">分组函数</a><ul><li><a href="#搭配DISTINCT" data-target-id="h2-搭配DISTINCT-5">搭配DISTINCT</a></li><li><a href="#COUNT函数" data-target-id="h2-COUNT函数-6">COUNT函数</a></li></ul></li></ul></div><div class="article_article-container__yUBmR"><div class="mb-8"><h1 data-title="true" class="mb-0">常见函数</h1><p class="opacity-50 !-mt-2"><span>Post: <!-- -->2022.09.18</span><span class="font-bold">·</span><span>Update: <!-- -->2022.09.18</span></p></div><h1>单行函数</h1>
<h2>字符函数</h2>
<ul>
<li><code>length</code>：获取字节分数</li>
<li><code>concat</code>：拼接字符串</li>
<li><code>upper</code>、<code>lower</code>：大写、小写</li>
<li><code>substr</code>、<code>substring</code>：从指定位置截取长度子串，其实索引为 1</li>
<li><code>instr</code>：返回子串第一次出现的索引，如果找不到返回0</li>
<li><code>trim</code>：去除首位空格</li>
<li><code>lpad</code>、<code>rpad</code>：用指定的字符左 / 右填充字符串</li>
<li><code>replace</code>：字符串替换</li>
</ul>
<pre><code class="language-mysql">SELECT
	TRIM( &#x27;    张翠山    &#x27; ),
	TRIM( &#x27;aa&#x27; FROM &#x27;aaaaaa张翠山aaaaaaaa&#x27; );
-- 张翠山	张翠山
</code></pre>
<h2>数学函数</h2>
<ul>
<li><code>round</code>：四舍五入</li>
<li><code>ceil</code>、<code>floor</code>：向上、下取整</li>
<li><code>truncate</code>：截断</li>
<li><code>mod</code>：求模，想当于 <code>%</code></li>
<li><code>rand</code>：获取0-1之间的随机数</li>
</ul>
<pre><code class="language-mysql">SELECT TRUNCATE(1.69999,1);
-- 1.6
</code></pre>
<h2>日期函数</h2>
<ul>
<li><code>now</code>：返回现在的日期和时间</li>
<li><code>curdate</code>：返回今天的日期</li>
<li><code>curtime</code>：返回现在的时间</li>
<li><code>year</code>、<code>month</code>、<code>day</code>...：返回指定日期的年份、月份、天...</li>
<li><code>monthname</code>：返回指定日期的月份的英文名</li>
<li><code>str_to_date</code>：将字符通过指定的格式转换成日期</li>
<li><code>date_format</code>：将日期转换成字符</li>
<li><code>datediff</code>：返回两个日期之间相差的天数</li>
</ul>
<pre><code class="language-mysql">SELECT YEAR(NOW());
-- 2021
SELECT STR_TO_DATE( &#x27;1998-3-2&#x27;, &#x27;%Y-%c-%d&#x27;);
-- 1998-03-02
SELECT STR_TO_DATE( &#x27;4-3 1992&#x27;, &#x27;%c-%d %Y&#x27; );
-- 1992-04-03
SELECT DATE_FORMAT(NOW(),&#x27;%y年%m月%d日&#x27;);
-- 21年04月16日
</code></pre>
<p><strong>格式符</strong></p>
<ul>
<li><code>%Y</code>：四位的年份</li>
<li><code>%y</code>：2位的年份</li>
<li><code>%m</code>：月份（01,02…11,12）</li>
<li><code>%c</code>：月份（1,2,…11,12）</li>
<li><code>%d</code>：日（01,02,…）</li>
<li><code>%H</code>：小时（24小时制）</li>
<li><code>%h</code>：小时（12小时制）</li>
<li><code>%i</code>：分钟（00,01…59）</li>
<li><code>%s</code>：秒（00,01,…59）</li>
</ul>
<h2>NULL相关</h2>
<ul>
<li><code>ifnull</code>：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值</li>
<li><code>isnull</code>：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</li>
</ul>
<h2>其他函数</h2>
<ul>
<li><code>version</code></li>
<li><code>database</code></li>
<li><code>user</code></li>
</ul>
<h1>分组函数</h1>
<p>功能：用作统计使用，又称为聚合函数或统计函数或组函数</p>
<ul>
<li><code>sum</code> 求和</li>
<li><code>avg</code> 平均值</li>
<li><code>max</code> 最大值</li>
<li><code>min</code> 最小值</li>
<li><code>count</code> 计算个数</li>
</ul>
<p>特点：</p>
<ol>
<li><code>sum</code>、<code>avg</code> 一般用于处理数值型</li>
<li><code>max</code>、<code>min</code>、<code>count</code> 可以处理任何类型</li>
<li>以上分组函数都会忽略 <code>null</code> 值</li>
<li>可以和 <code>distinct</code> 搭配实现去重的运算</li>
</ol>
<pre><code class="language-mysql">SELECT
	SUM( salary ) 和,
	AVG( salary ) 平均,
	MAX( salary ) 最高,
	MIN( salary ) 最低,
	COUNT( salary ) 个数 
FROM
	employees;
</code></pre>
<h2>搭配DISTINCT</h2>
<pre><code class="language-mysql">SELECT
	SUM( DISTINCT salary ),
	SUM( salary ) 
FROM
	employees;
</code></pre>
<h2>COUNT函数</h2>
<p><code>COUNT(*)</code> 和 <code>COUNT(常量)</code> 都可以获取到整个表 / 分组的行数</p>
<p><code>COUNT(*)</code> 会忽略NULL值，所以可以获取到行数</p>
<pre><code class="language-mysql">SELECT
	COUNT(*),
	COUNT( 1 ) 
FROM
	employees;
</code></pre><div><a href="/notes/MySQL">cd ..</a></div></div></main><footer class="pb-2 pt-12 text-center shrink-0"><div class="capitalize">copyright <span class="text-2xl align-middle">©</span> <!-- -->2022<!-- --> xie feng</div><div class="text-sm">Powered by NextJS</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metaTitle":"常见函数","article":{"title":"常见函数","content":"# 单行函数\r\n\r\n## 字符函数\r\n\r\n- `length`：获取字节分数\r\n- `concat`：拼接字符串\r\n- `upper`、`lower`：大写、小写\r\n- `substr`、`substring`：从指定位置截取长度子串，其实索引为 1\r\n- `instr`：返回子串第一次出现的索引，如果找不到返回0\r\n- `trim`：去除首位空格\r\n- `lpad`、`rpad`：用指定的字符左 / 右填充字符串\r\n- `replace`：字符串替换\r\n\r\n```mysql\r\nSELECT\r\n\tTRIM( '    张翠山    ' ),\r\n\tTRIM( 'aa' FROM 'aaaaaa张翠山aaaaaaaa' );\r\n-- 张翠山\t张翠山\r\n```\r\n\r\n## 数学函数\r\n\r\n- `round`：四舍五入\r\n- `ceil`、`floor`：向上、下取整\r\n- `truncate`：截断\r\n- `mod`：求模，想当于 `%`\r\n- `rand`：获取0-1之间的随机数\r\n\r\n```mysql\r\nSELECT TRUNCATE(1.69999,1);\r\n-- 1.6\r\n```\r\n\r\n## 日期函数\r\n\r\n- `now`：返回现在的日期和时间\r\n- `curdate`：返回今天的日期\r\n- `curtime`：返回现在的时间\r\n- `year`、`month`、`day`...：返回指定日期的年份、月份、天...\r\n- `monthname`：返回指定日期的月份的英文名\r\n- `str_to_date`：将字符通过指定的格式转换成日期\r\n- `date_format`：将日期转换成字符\r\n- `datediff`：返回两个日期之间相差的天数\r\n\r\n```mysql\r\nSELECT YEAR(NOW());\r\n-- 2021\r\nSELECT STR_TO_DATE( '1998-3-2', '%Y-%c-%d');\r\n-- 1998-03-02\r\nSELECT STR_TO_DATE( '4-3 1992', '%c-%d %Y' );\r\n-- 1992-04-03\r\nSELECT DATE_FORMAT(NOW(),'%y年%m月%d日');\r\n-- 21年04月16日\r\n```\r\n\r\n**格式符**\r\n\r\n- `%Y`：四位的年份\r\n- `%y`：2位的年份\r\n- `%m`：月份（01,02…11,12）\r\n- `%c`：月份（1,2,…11,12）\r\n- `%d`：日（01,02,…）\r\n- `%H`：小时（24小时制）\r\n- `%h`：小时（12小时制）\r\n- `%i`：分钟（00,01…59）\r\n- `%s`：秒（00,01,…59）\r\n\r\n## NULL相关\r\n\r\n- `ifnull`：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值\r\n- `isnull`：判断某字段或表达式是否为null，如果是，则返回1，否则返回0\r\n\r\n## 其他函数\r\n\r\n- `version`\r\n- `database`\r\n- `user`\r\n\r\n# 分组函数\r\n\r\n功能：用作统计使用，又称为聚合函数或统计函数或组函数\r\n\r\n- `sum` 求和\r\n- `avg` 平均值\r\n- `max` 最大值 \r\n- `min` 最小值 \r\n- `count` 计算个数\r\n\r\n特点：\r\n\r\n1. `sum`、`avg` 一般用于处理数值型\r\n2. `max`、`min`、`count` 可以处理任何类型\r\n3. 以上分组函数都会忽略 `null` 值\r\n4. 可以和 `distinct` 搭配实现去重的运算\r\n\r\n```mysql\r\nSELECT\r\n\tSUM( salary ) 和,\r\n\tAVG( salary ) 平均,\r\n\tMAX( salary ) 最高,\r\n\tMIN( salary ) 最低,\r\n\tCOUNT( salary ) 个数 \r\nFROM\r\n\temployees;\r\n```\r\n\r\n## 搭配DISTINCT\r\n\r\n```mysql\r\nSELECT\r\n\tSUM( DISTINCT salary ),\r\n\tSUM( salary ) \r\nFROM\r\n\temployees;\r\n```\r\n\r\n## COUNT函数\r\n\r\n`COUNT(*)` 和 `COUNT(常量)` 都可以获取到整个表 / 分组的行数\r\n\r\n`COUNT(*)` 会忽略NULL值，所以可以获取到行数\r\n\r\n```mysql\r\nSELECT\r\n\tCOUNT(*),\r\n\tCOUNT( 1 ) \r\nFROM\r\n\temployees;\r\n```\r\n\r\n","meta":{"size":2969,"birthTime":1663496641412.7495,"updateTime":1663496641412.8528}}},"__N_SSG":true},"page":"/notes/[[...param]]","query":{"param":["MySQL","常见函数"]},"buildId":"OyucwIrXZRgWNxoAUA9lF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>